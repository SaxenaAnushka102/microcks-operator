apiVersion: v1
kind: Namespace
metadata:
  name: microcks
spec:
  finalizers:
    - kubernetes
---
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: microckses.microcks.io
spec:
  group: microcks.io
  names:
    kind: Microcks
    plural: microckses
    shortNames:
      - microcks
    singular: microcks
  scope: Namespaced
  versions:
    - name: v1alpha1
      schema:
        openAPIV3Schema:
          properties:
            spec:
              properties:
                features:
                  description: Configuration of optional features in Microcks
                  properties:
                    async:
                      description: Configuration for asynchronous features
                      properties:
                        amqp:
                          description: Configuration of AMQP broker access
                          properties:
                            password:
                              description: The password to use for authenticating to
                                the broker
                              type: string
                            url:
                              description: The URL to use for connecting to the broker
                              type: string
                            username:
                              description: The username to use for authenticating to
                                the broker
                              type: string
                          type: object
                        defaultAvroEncoding:
                          description: Default Avro encoding mode for publishing mock
                            messages
                          enum:
                            - RAW
                            - REGISTRY
                          type: string
                        defaultBinding:
                          description: Default protocol binding to use if no specified
                            in AsyncAPI document
                          type: string
                        defaultFrequency:
                          description: Default frequency for publishing async mock messages
                          type: integer
                        enabled:
                          description: Enable/disable this feature. Default is false
                          type: boolean
                        googlepubsub:
                          description: Configuration of Google PubSub access
                          properties:
                            project:
                              description: The Google Cloud Platform (GCP) project to
                                use for connecting to PubSub broker
                              type: string
                            serviceAccountSecretRef:
                              description: A Secret reference holding the GCP serviceAccount
                                authentication token JSON file
                              properties:
                                additionalProperties:
                                  additionalProperties:
                                    type: object
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                                name:
                                  type: string
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          type: object
                        kafka:
                          description: Configuration of Kafka broker access and/or install
                          properties:
                            authentication:
                              description: Specification of authentication method when
                                using external Kafka
                              properties:
                                keystoreSecretRef:
                                  description: Reference to Secret holding client private
                                    key when using MTLS
                                  properties:
                                    additionalProperties:
                                      additionalProperties:
                                        type: object
                                      type: object
                                      x-kubernetes-preserve-unknown-fields: true
                                    name:
                                      type: string
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                                keystoreType:
                                  description: Type of keystore where to find private
                                    key when using MTLS. PKCS12 and JKS are supported
                                  type: string
                                saslJaasConfig:
                                  description: Additional JAAS config for SASL_TLS authentication
                                    type
                                  type: string
                                saslMechanism:
                                  description: SASL mechanism used when using SASL_TLS
                                    authentication type
                                  type: string
                                truststoreSecretRef:
                                  description: Reference to Secret holding cluster certificate
                                    for TLS transport
                                  properties:
                                    additionalProperties:
                                      additionalProperties:
                                        type: object
                                      type: object
                                      x-kubernetes-preserve-unknown-fields: true
                                    name:
                                      type: string
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                                truststoreType:
                                  description: Type of truststore where to find cluster
                                    certificate for TLS transport. PKCS12 and JKS are
                                    supported
                                  type: string
                                type:
                                  description: Type of authentication method for connecting
                                    to external Kafka broker
                                  enum:
                                    - NONE
                                    - SASL_SSL
                                    - SSL
                                  type: string
                              type: object
                            ingressClassName:
                              description: "When exposed via ingress, sets the ingressClassName\
                              \ property in the Ingress resources"
                              type: string
                            install:
                              description: Install Kafka broker or reuse an existing
                                instance? Default to true
                              type: boolean
                            persistent:
                              description: Use persistent storage or ephemeral one?
                                Default to false
                              type: boolean
                            resources:
                              description: Kubernetes resource requirements for Kafka
                                broker
                              properties:
                                claims:
                                  items:
                                    properties:
                                      name:
                                        type: string
                                    type: object
                                  type: array
                                limits:
                                  additionalProperties:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    x-kubernetes-int-or-string: true
                                  type: object
                                requests:
                                  additionalProperties:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    x-kubernetes-int-or-string: true
                                  type: object
                              type: object
                            schemaRegistry:
                              description: Specification of Schema registry connection
                              properties:
                                confluentCompatibility:
                                  description: Whether you should use the Confluent
                                    compatibility API layer. Default to true.
                                  type: boolean
                                credentialsSource:
                                  description: The source of credentials for authenticating
                                    the connection to Schema Registry. Defaults to USER_INFO.
                                  type: string
                                url:
                                  description: The URL for accessing external Schema
                                    Registry
                                  type: string
                                username:
                                  description: The username for authenticating the connection
                                    to Schema Registry
                                  type: string
                              type: object
                            url:
                              description: The URL to use for either exposing embedded
                                Kafka broker or connecting external broker
                              type: string
                            volumeSize:
                              description: Size of persistent storage volume if persistent
                              type: string
                            zkResources:
                              description: Kubernetes resource requirements for Zookeeper
                                ensemble
                              properties:
                                claims:
                                  items:
                                    properties:
                                      name:
                                        type: string
                                    type: object
                                  type: array
                                limits:
                                  additionalProperties:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    x-kubernetes-int-or-string: true
                                  type: object
                                requests:
                                  additionalProperties:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    x-kubernetes-int-or-string: true
                                  type: object
                              type: object
                          type: object
                        mqtt:
                          description: Configuration of MQTT broker access
                          properties:
                            password:
                              description: The password to use for authenticating to
                                the broker
                              type: string
                            url:
                              description: The URL to use for connecting to the broker
                              type: string
                            username:
                              description: The username to use for authenticating to
                                the broker
                              type: string
                          type: object
                        nats:
                          description: Configuration of NATS broker access
                          properties:
                            password:
                              description: The password to use for authenticating to
                                the broker
                              type: string
                            url:
                              description: The URL to use for connecting to the broker
                              type: string
                            username:
                              description: The username to use for authenticating to
                                the broker
                              type: string
                          type: object
                        sns:
                          description: Configuration of Amazon SNS access
                          properties:
                            credentialsProfile:
                              description: The name of profile to use for connecting
                                when using profile credentials type
                              type: string
                            credentialsSecretRef:
                              description: A secret reference holding the credentials
                                information for the chosen type
                              properties:
                                additionalProperties:
                                  additionalProperties:
                                    type: object
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                                name:
                                  type: string
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                            credentialsType:
                              description: The type of credentials provider to use for
                                connecting. Either env-variable or profile.
                              enum:
                                - ENV_VARIABLE
                                - PROFILE
                              type: string
                            region:
                              description: The Amazon region to use for connecting to
                                this service
                              type: string
                          type: object
                        sqs:
                          description: Configuration of Amazon SQS access
                          properties:
                            credentialsProfile:
                              description: The name of profile to use for connecting
                                when using profile credentials type
                              type: string
                            credentialsSecretRef:
                              description: A secret reference holding the credentials
                                information for the chosen type
                              properties:
                                additionalProperties:
                                  additionalProperties:
                                    type: object
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                                name:
                                  type: string
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                            credentialsType:
                              description: The type of credentials provider to use for
                                connecting. Either env-variable or profile.
                              enum:
                                - ENV_VARIABLE
                                - PROFILE
                              type: string
                            region:
                              description: The Amazon region to use for connecting to
                                this service
                              type: string
                          type: object
                      type: object
                    microcksHub:
                      description: Configuration for Microcks Hub related features
                      properties:
                        allowedRoles:
                          type: string
                        enabled:
                          description: Enable/disable this feature. Default is false.
                          type: boolean
                      type: object
                    repositoryFilter:
                      description: Configuration for repository filtering features
                      properties:
                        enabled:
                          description: Enable/disable this feature. Default is false
                          type: boolean
                        labelKey:
                          description: The label key to consider for repository filtering
                          type: string
                        labelLabel:
                          description: The label of label used for repository filtering
                          type: string
                        labelList:
                          description: "The list of labels (separated by ,) to display\
                          \ on services list"
                          type: string
                      type: object
                    repositoryTenancy:
                      description: Configuration for repository tenancy features
                      properties:
                        artifactImportAllowedRoles:
                          description: "The list of roles (separated by ,) that are\
                          \ allowed to import artifacts"
                          type: string
                        enabled:
                          description: Enable/disable this feature. Default is false
                          type: boolean
                      type: object
                  type: object
                keycloak:
                  description: Configuration of Keycloak access and/or install
                  properties:
                    ingress:
                      description: Configuration to apply to Ingress if created
                      properties:
                        annotations:
                          additionalProperties:
                            type: string
                          description: Annotations to apply to Ingress if created
                          type: object
                        className:
                          description: "When exposed, sets the ingressClassName property"
                          type: string
                        expose:
                          description: Whether Ingress should be exposed (ie. created)
                          type: boolean
                        generateCert:
                          description: Whether operator should generate self-signed
                            certificate for this ingress
                          type: boolean
                        secretRef:
                          description: Existing Secret holding TLS key and certificate
                            name
                          type: string
                      type: object
                    install:
                      description: Install Keycloak or reuse an existing instance? Default
                        to true.
                      type: boolean
                    openshift:
                      description: Configuration of OpenShift specific settings
                      properties:
                        route:
                          description: Allow configuration of settings for OpenShift
                            routes
                          properties:
                            enabled:
                              description: Whether operator should use Route API if
                                on OpenShift
                              type: boolean
                            tlsCaCertificate:
                              description: TLS CA certificate for reencrypt termination
                              type: string
                            tlsCertificate:
                              description: TLS certificate for reencrypt termination
                              type: string
                            tlsDestinationCaCertificate:
                              description: TLS destination CA certificate for reencrypt
                                termination
                              type: string
                            tlsInsecureEdgeTerminationPolicy:
                              description: TLS insecure edge termination policy
                              type: string
                            tlsKey:
                              description: TLS private key for reencrypt termination
                              type: string
                            tlsTermination:
                              description: "Type of OpenShift route to create ('edge',\
                              \ 'passthrough', 'reencrypt'"
                              type: string
                          type: object
                      type: object
                    operatorServiceAccountEnabled:
                      description: Flag to enable/disable the Service Account dedicated
                        to the operator for connecting to Keycloak. Default to true.
                      type: boolean
                    persistent:
                      description: Use persistent storage or ephemeral one? Default
                        to true.
                      type: boolean
                    privateUrl:
                      description: "A private URL - a full URL here - used by the Microcks\
                      \ component to internally join Keycloak. This is also known\
                      \ as `backendUrl` in Keycloak. When specified, the `keycloak.url`\
                      \ is used as `frontendUrl` in Keycloak terms."
                      type: string
                    realm:
                      description: Keycloak realm to use for authentication on Microcks
                      type: string
                    serviceAccount:
                      description: Service Account for connecting external services
                        to Microcks
                      type: string
                    serviceAccountCredentials:
                      description: Service Account credentials for external services
                      type: string
                    storageClassName:
                      description: Name of storage class to use if not relying on default
                      type: string
                    url:
                      description: Keycloak root URL to use for access and Ingress if
                        created
                      type: string
                    volumeSize:
                      description: Size of persistent storage volume if persistent
                      type: string
                  type: object
                microcks:
                  description: Configuration of main Microcks service
                  properties:
                    env:
                      description: Environment variables for Microcks service
                      items:
                        properties:
                          name:
                            type: string
                          value:
                            type: string
                          valueFrom:
                            properties:
                              configMapKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                  optional:
                                    type: boolean
                                type: object
                              fieldRef:
                                properties:
                                  apiVersion:
                                    type: string
                                  fieldPath:
                                    type: string
                                type: object
                              resourceFieldRef:
                                properties:
                                  containerName:
                                    type: string
                                  divisor:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    x-kubernetes-int-or-string: true
                                  resource:
                                    type: string
                                type: object
                              secretKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                  optional:
                                    type: boolean
                                type: object
                            type: object
                        type: object
                      type: array
                    extraAnnotations:
                      additionalProperties:
                        type: string
                      description: "Extra annotations added to Service, Deployment and\
                      \ Pods"
                      type: object
                    extraProperties:
                      additionalProperties:
                        x-kubernetes-preserve-unknown-fields: true
                      description: Extra properties to integration into application-extra
                        configuration
                      type: object
                    grpcIngress:
                      description: Configuration to apply to Ingress for gRPC if creates
                      properties:
                        annotations:
                          additionalProperties:
                            type: string
                          description: Annotations to apply to Ingress if created
                          type: object
                        className:
                          description: "When exposed, sets the ingressClassName property"
                          type: string
                        expose:
                          description: Whether Ingress should be exposed (ie. created)
                          type: boolean
                        generateCert:
                          description: Whether operator should generate self-signed
                            certificate for this ingress
                          type: boolean
                        secretRef:
                          description: Existing Secret holding TLS key and certificate
                            name
                          type: string
                      type: object
                    ingress:
                      description: Configuration to apply to Ingress if created
                      properties:
                        annotations:
                          additionalProperties:
                            type: string
                          description: Annotations to apply to Ingress if created
                          type: object
                        className:
                          description: "When exposed, sets the ingressClassName property"
                          type: string
                        expose:
                          description: Whether Ingress should be exposed (ie. created)
                          type: boolean
                        generateCert:
                          description: Whether operator should generate self-signed
                            certificate for this ingress
                          type: boolean
                        secretRef:
                          description: Existing Secret holding TLS key and certificate
                            name
                          type: string
                      type: object
                    logLevel:
                      description: Allow configuration of logging level. Defaults to
                        INFO
                      enum:
                        - DEBUG
                        - ERROR
                        - INFO
                        - WARN
                      type: string
                    mockInvocationStats:
                      description: Enable/disable statistics for mocks invocation. Defaults
                        to true
                      type: boolean
                    openshift:
                      description: Configuration of OpenShift specific settings
                      properties:
                        route:
                          description: Allow configuration of settings for OpenShift
                            routes
                          properties:
                            enabled:
                              description: Whether operator should use Route API if
                                on OpenShift
                              type: boolean
                            tlsCaCertificate:
                              description: TLS CA certificate for reencrypt termination
                              type: string
                            tlsCertificate:
                              description: TLS certificate for reencrypt termination
                              type: string
                            tlsDestinationCaCertificate:
                              description: TLS destination CA certificate for reencrypt
                                termination
                              type: string
                            tlsInsecureEdgeTerminationPolicy:
                              description: TLS insecure edge termination policy
                              type: string
                            tlsKey:
                              description: TLS private key for reencrypt termination
                              type: string
                            tlsTermination:
                              description: "Type of OpenShift route to create ('edge',\
                              \ 'passthrough', 'reencrypt'"
                              type: string
                          type: object
                      type: object
                    replicas:
                      description: Number of desired pods for Microcks service
                      type: integer
                    resources:
                      description: Kubernetes resource requirements for Microcks service
                      properties:
                        claims:
                          items:
                            properties:
                              name:
                                type: string
                            type: object
                          type: array
                        limits:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            x-kubernetes-int-or-string: true
                          type: object
                        requests:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            x-kubernetes-int-or-string: true
                          type: object
                      type: object
                    url:
                      description: The URL to use for exposing Microcks main ingress
                      type: string
                  type: object
                mongodb:
                  description: Configuration of MongoDB access and/or install
                  properties:
                    database:
                      description: MongoDB database name in case you're reusing existing
                        one. Only if install if false.
                      type: string
                    install:
                      description: Install MongoDB or reuse an existing instance? Default
                        to true.
                      type: boolean
                    persistent:
                      description: Use persistent storage or ephemeral one? Default
                        to true
                      type: boolean
                    resources:
                      description: Kubernetes resource requirements for MongoDB
                      properties:
                        claims:
                          items:
                            properties:
                              name:
                                type: string
                            type: object
                          type: array
                        limits:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            x-kubernetes-int-or-string: true
                          type: object
                        requests:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            x-kubernetes-int-or-string: true
                          type: object
                      type: object
                    secretRef:
                      description: Reference of a Secret containing username and password
                        keys for connecting to existing MongoDB instance
                      properties:
                        additionalProperties:
                          additionalProperties:
                            type: object
                          type: object
                          x-kubernetes-preserve-unknown-fields: true
                        name:
                          type: string
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    storageClassName:
                      description: Name of storage class to use if not relying on default
                      type: string
                    uri:
                      description: MongoDB root URI to use for access
                      type: string
                    uriParameters:
                      description: Parameters added to MongoDB URI connection string.
                        Only if install if false.
                      type: string
                    volumeSize:
                      description: Size of persistent storage volume if persistent
                      type: string
                  type: object
                postman:
                  description: Configuration of Postman runtime
                  properties:
                    replicas:
                      description: Number of desired pods for Postman runtime
                      type: integer
                  type: object
                version:
                  description: The Microcks version
                  type: string
              type: object
            status:
              properties:
                additionalProperties:
                  additionalProperties:
                    type: object
                  type: object
                conditions:
                  description: List of status conditions
                  items:
                    properties:
                      additionalProperties:
                        additionalProperties:
                          type: object
                        type: object
                      lastTransitionTime:
                        description: "Last time the condition of a type changed from\
                        \ one status to another. The required format is 'yyyy-MM-ddTHH:mm:ssZ',\
                        \ in the UTC time zone"
                        type: string
                      message:
                        description: Human-readable message indicating details about
                          the condition's last transition
                        type: string
                      reason:
                        description: The reason for the condition's last transition
                          (a single word in CamelCase)
                        type: string
                      status:
                        description: The status of the condition
                        enum:
                          - DEPLOYING
                          - ERROR
                          - PREEXISTING
                          - READY
                          - UNKNOWN
                        type: string
                      type:
                        description: "The unique identifier of a condition, used to\
                        \ distinguish between other conditions in the resource"
                        type: string
                    type: object
                  type: array
                keycloakUrl:
                  description: The URL to access Keycloak once installation completed
                  type: string
                message:
                  type: string
                microcksUrl:
                  description: The URL to access Microcks once installation completed
                  type: string
                observedGeneration:
                  description: Reconciled generation
                  type: integer
                status:
                  description: Global status of the reconciliation
                  enum:
                    - DEPLOYING
                    - ERROR
                    - PREEXISTING
                    - READY
                    - UNKNOWN
                  type: string
              type: object
          type: object
      served: true
      storage: true
      subresources:
        status: {}
---
# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: apisources.microcks.io
spec:
  group: microcks.io
  names:
    kind: APISource
    plural: apisources
    shortNames:
      - apisource
    singular: apisource
  scope: Namespaced
  versions:
    - name: v1alpha1
      schema:
        openAPIV3Schema:
          properties:
            spec:
              properties:
                artifacts:
                  description: A list of Artifacts to import into Microcks instance
                  items:
                    properties:
                      mainArtifact:
                        description: Define this artifact as main/primary one. Defaults
                          to true
                        type: boolean
                      secretRef:
                        description: Reference to a Secret for accessing the artifact
                          url
                        type: string
                      url:
                        description: The URL to access this remote artifact definition
                        type: string
                    type: object
                  type: array
                importers:
                  description: A list of Importers to create in Microcks instance
                  items:
                    properties:
                      active:
                        description: Define if this importer is active or not. Defaults
                          to true
                        type: boolean
                      labels:
                        additionalProperties:
                          type: string
                        description: Labels to put on created importer
                        type: object
                      mainArtifact:
                        description: Define the imported artifact as main/primary one.
                          Defaults to true
                        type: boolean
                      name:
                        description: Name of importer to create
                        type: string
                      repository:
                        description: Reference to a Repository to import from
                        properties:
                          disableSSLValidation:
                            description: Whether to disable SSL validation when accessing
                              the repository. Defaults to false
                            type: boolean
                          secretRef:
                            description: Reference to a Secret to reference in the importer
                            type: string
                          url:
                            description: The URL to access this repository artifact
                              definition
                            type: string
                        type: object
                    type: object
                  type: array
              type: object
            status:
              properties:
                additionalProperties:
                  additionalProperties:
                    type: object
                  type: object
                conditions:
                  description: List of status conditions
                  items:
                    properties:
                      additionalProperties:
                        additionalProperties:
                          type: object
                        type: object
                      lastTransitionTime:
                        description: "Last time the condition of a type changed from\
                        \ one status to another. The required format is 'yyyy-MM-ddTHH:mm:ssZ',\
                        \ in the UTC time zone"
                        type: string
                      message:
                        description: Human-readable message indicating details about
                          the condition's last transition
                        type: string
                      reason:
                        description: The reason for the condition's last transition
                          (a single word in CamelCase)
                        type: string
                      status:
                        description: The status of the condition
                        enum:
                          - DEPLOYING
                          - ERROR
                          - PREEXISTING
                          - READY
                          - UNKNOWN
                        type: string
                      type:
                        description: "The unique identifier of a condition, used to\
                        \ distinguish between other conditions in the resource"
                        type: string
                    type: object
                  type: array
                message:
                  type: string
                observedGeneration:
                  description: Reconciled generation
                  type: integer
                status:
                  description: Global status of the reconciliation
                  enum:
                    - DEPLOYING
                    - ERROR
                    - PREEXISTING
                    - READY
                    - UNKNOWN
                  type: string
              type: object
          type: object
      served: true
      storage: true
      subresources:
        status: {}
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: microcks-operator
  namespace: microcks
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: microcks-operator
  namespace: microcks
rules:
  - apiGroups:
      - ""
    resources:
      - pods
      - services
      - endpoints
      - persistentvolumeclaims
      - events
      - configmaps
      - secrets
    verbs:
      - '*'
  - apiGroups:
      - ""
    resources:
      - namespaces
    verbs:
      - get
  - apiGroups:
      - apps
    resources:
      - deployments
      - daemonsets
      - replicasets
      - statefulsets
    verbs:
      - '*'
  - apiGroups:
      - route.openshift.io
    resources:
      - routes
    verbs:
      - '*'
  - apiGroups:
      - networking.k8s.io
    resources:
      - ingresses
    verbs:
      - '*'
  - apiGroups:
      - route.openshift.io
    resources:
      - routes/custom-host
    verbs:
      - create
  - apiGroups:
      - extensions
    resources:
      - ingresses
    verbs:
      - '*'
  - apiGroups:
      - monitoring.coreos.com
    resources:
      - servicemonitors
    verbs:
      - get
      - create
  - apiGroups:
      - kafka.strimzi.io
    resources:
      - kafkas
      - kafkatopics
    verbs:
      - '*'
  - apiGroups:
      - microcks.io
    resources:
      - '*'
    verbs:
      - '*'
---
kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: microcks-operator
  namespace: microcks
subjects:
  - kind: ServiceAccount
    name: microcks-operator
roleRef:
  kind: Role
  name: microcks-operator
  apiGroup: rbac.authorization.k8s.io
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: microcks-operator
  namespace: microcks
spec:
  replicas: 1
  selector:
    matchLabels:
      name: microcks-operator
  template:
    metadata:
      labels:
        name: microcks-operator
    spec:
      serviceAccountName: microcks-operator
      containers:
        - name: microcks-operator
          image: quay.io/microcks/microcks-operator:e2e-tests
          #image: quay.io/lbroudoux/microcks-operator:jvm-latest
          imagePullPolicy: Always
          env:
            - name: WATCH_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: OPERATOR_NAME
              value: microcks-operator