# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: microckses.microcks.io
spec:
  group: microcks.io
  names:
    kind: Microcks
    plural: microckses
    shortNames:
      - microcks
    singular: microcks
  scope: Namespaced
  versions:
    - name: v1alpha1
      schema:
        openAPIV3Schema:
          properties:
            spec:
              properties:
                postman:
                  description: Configuration of Postman runtime
                  properties:
                    replicas:
                      description: Number of desired pods for Postman runtime
                      type: integer
                  type: object
                version:
                  description: The Microcks version
                  type: string
                microcks:
                  description: Configuration of main Microcks service
                  properties:
                    env:
                      description: Environment variables for Microcks service
                      items:
                        properties:
                          value:
                            type: string
                          valueFrom:
                            properties:
                              configMapKeyRef:
                                properties:
                                  optional:
                                    type: boolean
                                  key:
                                    type: string
                                  name:
                                    type: string
                                type: object
                              fieldRef:
                                properties:
                                  apiVersion:
                                    type: string
                                  fieldPath:
                                    type: string
                                type: object
                              resourceFieldRef:
                                properties:
                                  containerName:
                                    type: string
                                  divisor:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    x-kubernetes-int-or-string: true
                                  resource:
                                    type: string
                                type: object
                              secretKeyRef:
                                properties:
                                  optional:
                                    type: boolean
                                  key:
                                    type: string
                                  name:
                                    type: string
                                type: object
                            type: object
                          name:
                            type: string
                        type: object
                      type: array
                    openshift:
                      description: Configuration of OpenShift specific settings
                      properties:
                        route:
                          description: Allow configuration of settings for OpenShift
                            routes
                          properties:
                            tlsDestinationCaCertificate:
                              description: TLS destination CA certificate for reencrypt
                                termination
                              type: string
                            tlsKey:
                              description: TLS private key for reencrypt termination
                              type: string
                            tlsCertificate:
                              description: TLS certificate for reencrypt termination
                              type: string
                            tlsInsecureEdgeTerminationPolicy:
                              description: TLS insecure edge termination policy
                              type: string
                            tlsCaCertificate:
                              description: TLS CA certificate for reencrypt termination
                              type: string
                            enabled:
                              description: Whether operator should use Route API if
                                on OpenShift
                              type: boolean
                            tlsTermination:
                              description: "Type of OpenShift route to create ('edge',\
                              \ 'passthrough', 'reencrypt'"
                              type: string
                          type: object
                      type: object
                    ingress:
                      description: Configuration to apply to Ingress if created
                      properties:
                        secretRef:
                          description: Existing Secret holding TLS key and certificate
                            name
                          type: string
                        generateCert:
                          description: Whether operator should generate self-signed
                            certificate for this ingress
                          type: boolean
                        annotations:
                          additionalProperties:
                            type: string
                          description: Annotations to apply to Ingress if created
                          type: object
                      type: object
                    extraProperties:
                      additionalProperties:
                        properties:
                          value:
                            type: object
                        x-kubernetes-preserve-unknown-fields: true
                      description: Extra properties to integration into application-extra
                        configuration
                      type: object
                    url:
                      description: The URL to use for exposing Microcks main ingress
                      type: string
                    replicas:
                      description: Number of desired pods for Microcks service
                      type: integer
                    resources:
                      description: Kubernetes resource requirements for Microcks service
                      properties:
                        limits:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            x-kubernetes-int-or-string: true
                          type: object
                        requests:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            x-kubernetes-int-or-string: true
                          type: object
                      type: object
                    mockInvocationStats:
                      description: Enable/disable statistics for mocks invocation. Defaults
                        to true
                      type: boolean
                    logLevel:
                      description: Allow configuration of logging level. Defaults to
                        INFO
                      enum:
                        - DEBUG
                        - INFO
                        - ERROR
                        - WARN
                      type: string
                  type: object
                keycloak:
                  description: Configuration of Keycloak access and/or install
                  properties:
                    storageClassName:
                      description: Name of storage class to use if not relying on default
                      type: string
                    openshift:
                      description: Configuration of OpenShift specific settings
                      properties:
                        route:
                          description: Allow configuration of settings for OpenShift
                            routes
                          properties:
                            tlsDestinationCaCertificate:
                              description: TLS destination CA certificate for reencrypt
                                termination
                              type: string
                            tlsKey:
                              description: TLS private key for reencrypt termination
                              type: string
                            tlsCertificate:
                              description: TLS certificate for reencrypt termination
                              type: string
                            tlsInsecureEdgeTerminationPolicy:
                              description: TLS insecure edge termination policy
                              type: string
                            tlsCaCertificate:
                              description: TLS CA certificate for reencrypt termination
                              type: string
                            enabled:
                              description: Whether operator should use Route API if
                                on OpenShift
                              type: boolean
                            tlsTermination:
                              description: "Type of OpenShift route to create ('edge',\
                              \ 'passthrough', 'reencrypt'"
                              type: string
                          type: object
                      type: object
                    ingress:
                      description: Configuration to apply to Ingress if created
                      properties:
                        secretRef:
                          description: Existing Secret holding TLS key and certificate
                            name
                          type: string
                        generateCert:
                          description: Whether operator should generate self-signed
                            certificate for this ingress
                          type: boolean
                        annotations:
                          additionalProperties:
                            type: string
                          description: Annotations to apply to Ingress if created
                          type: object
                      type: object
                    privateUrl:
                      description: "A private URL - a full URL here - used by the Microcks\
                      \ component to internally join Keycloak. This is also known\
                      \ as `backendUrl` in Keycloak. When specified, the `keycloak.url`\
                      \ is used as `frontendUrl` in Keycloak terms."
                      type: string
                    volumeSize:
                      description: Size of persistent storage volume if persistent
                      type: string
                    install:
                      description: Install Keycloak or reuse an existing instance? Default
                        to true.
                      type: boolean
                    realm:
                      description: Keycloak realm to use for authentication on Microcks
                      type: string
                    url:
                      description: Keycloak root URL to use for access and Ingress if
                        created
                      type: string
                    persistent:
                      description: Use persistent storage or ephemeral one? Default
                        to true.
                      type: boolean
                    serviceAccountCredentials:
                      description: Service Account credentials for external services
                      type: string
                    serviceAccount:
                      description: Service Account for connecting external services
                        to Microcks
                      type: string
                  type: object
                mongodb:
                  description: Configuration of MongoDB access and/or install
                  properties:
                    storageClassName:
                      description: Name of storage class to use if not relying on default
                      type: string
                    volumeSize:
                      description: Size of persistent storage volume if persistent
                      type: string
                    uriParameters:
                      description: Parameters added to MongoDB URI connection string.
                        Only if install if false.
                      type: string
                    install:
                      description: Install MongoDB or reuse an existing instance? Default
                        to true.
                      type: boolean
                    uri:
                      description: MongoDB root URI to use for access
                      type: string
                    persistent:
                      description: Use persistent storage or ephemeral one? Default
                        to true
                      type: boolean
                    resources:
                      description: Kubernetes resource requirements for MongoDB
                      properties:
                        limits:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            x-kubernetes-int-or-string: true
                          type: object
                        requests:
                          additionalProperties:
                            anyOf:
                              - type: integer
                              - type: string
                            x-kubernetes-int-or-string: true
                          type: object
                      type: object
                    secretRef:
                      description: Reference of a Secret containing username and password
                        keys for connecting to existing MongoDB instance
                      properties:
                        name:
                          type: string
                        additionalProperties:
                          additionalProperties:
                            type: object
                          type: object
                      type: object
                    database:
                      description: MongoDB database name in case you're reusing existing
                        one. Only if install if false.
                      type: string
                  type: object
                features:
                  description: Configuration of optional features in Microcks
                  properties:
                    repositoryFilter:
                      description: Configuration for repository filtering features
                      properties:
                        labelKey:
                          description: The label key to consider for repository filtering
                          type: string
                        enabled:
                          description: Enable/disable this feature. Default is false
                          type: boolean
                        labelList:
                          description: "The list of labels (separated by ,) to display\
                          \ on services list"
                          type: string
                        labelLabel:
                          description: The label of label used for repository filtering
                          type: string
                      type: object
                    repositoryTenancy:
                      description: Configuration for repository tenancy features
                      properties:
                        artifactImportAllowedRoles:
                          description: "The list of roles (separated by ,) that are\
                          \ allowed to import artifacts"
                          type: string
                        enabled:
                          description: Enable/disable this feature. Default is false
                          type: boolean
                      type: object
                    microcksHub:
                      description: Configuration for Microcks Hub related features
                      properties:
                        allowedRoles:
                          type: string
                        enabled:
                          description: Enable/disable this feature. Default is false.
                          type: boolean
                      type: object
                    async:
                      description: Configuration for asynchronous features
                      properties:
                        googlepubsub:
                          description: Configuration of Google PubSub access
                          properties:
                            serviceAccountSecretRef:
                              description: A Secret reference holding the GCP serviceAccount
                                authentication token JSON file
                              properties:
                                name:
                                  type: string
                                additionalProperties:
                                  additionalProperties:
                                    type: object
                                  type: object
                              type: object
                            project:
                              description: The Google Cloud Platform (GCP) project to
                                use for connecting to PubSub broker
                              type: string
                          type: object
                        nats:
                          description: Configuration of NATS broker access
                          properties:
                            username:
                              description: The username to use for authenticating to
                                the broker
                              type: string
                            password:
                              description: The password to use for authenticating to
                                the broker
                              type: string
                            url:
                              description: The URL to use for connecting to the broker
                              type: string
                          type: object
                        defaultFrequency:
                          description: Default frequency for publishing async mock messages
                          type: integer
                        kafka:
                          description: Configuration of Kafka broker access and/or install
                          properties:
                            schemaRegistry:
                              description: Specification of Schema registry connection
                              properties:
                                username:
                                  description: The username for authenticating the connection
                                    to Schema Registry
                                  type: string
                                credentialsSource:
                                  description: The source of credentials for authenticating
                                    the connection to Schema Registry. Defaults to USER_INFO.
                                  type: string
                                confluentCompatibility:
                                  description: Whether you should use the Confluent
                                    compatibility API layer. Default to true.
                                  type: boolean
                                url:
                                  description: The URL for accessing external Schema
                                    Registry
                                  type: string
                              type: object
                            volumeSize:
                              description: Size of persistent storage volume if persistent
                              type: string
                            install:
                              description: Install Kafka broker or reuse an existing
                                instance? Default to true
                              type: boolean
                            url:
                              description: The URL to use for either exposing embedded
                                Kafka broker or connecting external broker
                              type: string
                            zkResources:
                              description: Kubernetes resource requirements for Zookeeper
                                ensemble
                              properties:
                                limits:
                                  additionalProperties:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    x-kubernetes-int-or-string: true
                                  type: object
                                requests:
                                  additionalProperties:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    x-kubernetes-int-or-string: true
                                  type: object
                              type: object
                            persistent:
                              description: Use persistent storage or ephemeral one?
                                Default to true
                              type: boolean
                            authentication:
                              description: Specification of authentication method when
                                using external Kafka
                              properties:
                                truststoreType:
                                  description: Type of truststore where to find cluster
                                    certificate for TLS transport. PKCS12 and JKS are
                                    supported
                                  type: string
                                truststoreSecretRef:
                                  description: Reference to Secret holding cluster certificate
                                    for TLS transport
                                  properties:
                                    name:
                                      type: string
                                    additionalProperties:
                                      additionalProperties:
                                        type: object
                                      type: object
                                  type: object
                                saslJaasConfig:
                                  description: Additional JAAS config for SASL_TLS authentication
                                    type
                                  type: string
                                saslMechanism:
                                  description: SASL mechanism used when using SASL_TLS
                                    authentication type
                                  type: string
                                type:
                                  description: Type of authentication method for connecting
                                    to external Kafka broker
                                  enum:
                                    - SASL_SSL
                                    - NONE
                                    - SSL
                                  type: string
                                keystoreSecretRef:
                                  description: Reference to Secret holding client private
                                    key when using MTLS
                                  properties:
                                    name:
                                      type: string
                                    additionalProperties:
                                      additionalProperties:
                                        type: object
                                      type: object
                                  type: object
                                keystoreType:
                                  description: Type of keystore where to find private
                                    key when using MTLS. PKCS12 and JKS are supported
                                  type: string
                              type: object
                            resources:
                              description: Kubernetes resource requirements for Kafka
                                broker
                              properties:
                                limits:
                                  additionalProperties:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    x-kubernetes-int-or-string: true
                                  type: object
                                requests:
                                  additionalProperties:
                                    anyOf:
                                      - type: integer
                                      - type: string
                                    x-kubernetes-int-or-string: true
                                  type: object
                              type: object
                          type: object
                        enabled:
                          description: Enable/disable this feature. Default is false
                          type: boolean
                        mqtt:
                          description: Configuration of MQTT broker access
                          properties:
                            username:
                              description: The username to use for authenticating to
                                the broker
                              type: string
                            password:
                              description: The password to use for authenticating to
                                the broker
                              type: string
                            url:
                              description: The URL to use for connecting to the broker
                              type: string
                          type: object
                        defaultBinding:
                          description: Default protocol binding to use if no specified
                            in AsyncAPI document
                          type: string
                        defaultAvroEncoding:
                          description: Default Avro encoding mode for publishing mock
                            messages
                          enum:
                            - REGISTRY
                            - RAW
                          type: string
                        amqp:
                          description: Configuration of AMQP broker access
                          properties:
                            username:
                              description: The username to use for authenticating to
                                the broker
                              type: string
                            password:
                              description: The password to use for authenticating to
                                the broker
                              type: string
                            url:
                              description: The URL to use for connecting to the broker
                              type: string
                          type: object
                      type: object
                  type: object
              type: object
            status:
              properties:
                observedGeneration:
                  description: Reconcilied generation
                  type: integer
                microcksUrl:
                  description: The URL to access Microcks once installation completed
                  type: string
                conditions:
                  description: List of status conditions
                  items:
                    properties:
                      reason:
                        description: The reason for the condition's last transition
                          (a single word in CamelCase)
                        type: string
                      lastTransitionTime:
                        description: "Last time the condition of a type changed from\
                        \ one status to another. The required format is 'yyyy-MM-ddTHH:mm:ssZ',\
                        \ in the UTC time zone"
                        type: string
                      type:
                        description: "The unique identifier of a condition, used to\
                        \ distinguish between other conditions in the resource"
                        type: string
                      additionalProperties:
                        additionalProperties:
                          type: object
                        type: object
                      status:
                        description: The status of the condition
                        enum:
                          - PREEXISTING
                          - DEPLOYING
                          - UNKNOWN
                          - READY
                          - ERROR
                        type: string
                      message:
                        description: Human-readable message indicating details about
                          the condition's last transition
                        type: string
                    type: object
                  type: array
                additionalProperties:
                  additionalProperties:
                    type: object
                  type: object
                status:
                  description: Global status of the reconciliation
                  enum:
                    - PREEXISTING
                    - DEPLOYING
                    - UNKNOWN
                    - READY
                    - ERROR
                  type: string
                keycloakUrl:
                  description: The URL to access Keycloak once installation completed
                  type: string
                message:
                  type: string
              type: object
          type: object
      served: true
      storage: true
      subresources:
        status: {}
